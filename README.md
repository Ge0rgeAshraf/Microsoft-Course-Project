# User Management API

## Project Overview

This project is a User Management API developed for TechHive Solutions' internal tools. It provides essential endpoints for the HR and IT departments to manage user records efficiently. The API is built using ASP.NET Core and includes features for creating, retrieving, updating, and deleting users.

### Core Features

- **CRUD Operations**: Standard endpoints for managing user data:
  - `GET /api/users`: Retrieve all users.
  - `GET /api/users/{id}`: Retrieve a single user by ID.
  - `POST /api/users`: Create a new user.
  - `PUT /api/users/{id}`: Update an existing user.
  - `DELETE /api/users/{id}`: Delete a user.
- **Input Validation**: Ensures that user data, such as names and email addresses, is valid before being processed.
- **Centralized Middleware**:
  - **Error Handling**: A global middleware that catches unhandled exceptions and returns a consistent JSON error response, preventing application crashes.
  - **Authentication**: A simple API key-based middleware (`X-Api-Key` header) to secure all endpoints.
  - **Logging**: A middleware that logs key details of every incoming request and outgoing response for auditing and debugging purposes.

## Microsoft Copilot Contributions

Microsoft Copilot was used extensively throughout the development of this project, acting as an AI programming assistant. Its contributions were crucial in scaffolding, developing, debugging, and documenting the API.

### 1. Scaffolding and Boilerplate Code
- **Project Initialization**: Copilot generated the `dotnet new webapi` command and the initial project structure for the `UserManagementAPI`.
- **Configuration**: It provided the necessary boilerplate code for `Program.cs` to configure services, dependency injection, and the HTTP request pipeline, including setting up Swagger for API documentation.

### 2. Code Generation and Feature Implementation
- **API Endpoints**: Copilot generated the complete `UsersController`, including all the CRUD action methods (`GET`, `POST`, `PUT`, `DELETE`) with initial in-memory data storage.
- **Data Models**: The `User` model class was created by Copilot with properties for `Id`, `Name`, and `Email`.
- **Middleware**: Copilot generated three separate middleware components from scratch based on high-level requirements:
  - `LoggingMiddleware` to log request and response details.
  - `ErrorHandlingMiddleware` to create a global exception handler.
  - `AuthenticationMiddleware` for a basic API key validation system.

### 3. Debugging and Error Resolution
- **Build Errors**: When the project failed to build due to missing dependencies for Swagger (`Swashbuckle.AspNetCore`), Copilot diagnosed the error messages and provided the correct `dotnet add package` command to resolve it.
- **Runtime Errors**: Copilot identified and fixed a runtime `TypeLoadException` caused by conflicting package versions (`Microsoft.AspNetCore.OpenApi` and `Swashbuckle.AspNetCore`) by removing the unnecessary package.
- **Bug Fixes**: Copilot analyzed the initial code to identify logical bugs, such as a lack of input validation and no protection against unhandled exceptions. It then generated the fixes by adding data annotations to the `User` model and implementing the error-handling middleware.

### 4. Refactoring and Best Practices
- After implementing the global error-handling middleware, Copilot identified that the local `try-catch` blocks in the `UsersController` were now redundant and refactored the controller to remove them, resulting in cleaner and more maintainable code.
- It ensured the middleware pipeline in `Program.cs` was configured in the correct order for proper execution (Error Handling > Authentication > Logging).

### 5. Documentation and Testing Guidance
- Copilot provided clear, step-by-step instructions on how to run and test the API, including sample `curl` commands for each endpoint and for testing the middleware functionality (e.g., testing with and without a valid API key).
- This `README.md` file itself was generated by Copilot to summarize the project and its contributions.
